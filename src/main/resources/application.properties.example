# ==========================================
# Application Configuration
# ==========================================
spring.application.name=cardiac-trader-backend
server.port=8080

# ==========================================
# Database Configuration (MySQL)
# ==========================================
spring.datasource.url=jdbc:mysql://localhost:3306/cardiac_trader?createDatabaseIfNotExist=true&useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=your_database_password
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA/Hibernate Configuration
# TEMPORARILY set to 'create' to recreate database schema with TEXT column
# CHANGE BACK to 'update' after first successful startup (to prevent data loss)
spring.jpa.hibernate.ddl-auto=create
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# ==========================================
# External API Configuration
# ==========================================
# Heart Game API (Primary)
# Documentation: https://marcconrad.com/uob/heart/doc.php
# Base URL: https://marcconrad.com/uob/heart/api.php (must use HTTPS)
heart.api.url=${HEART_API_URL:https://marcconrad.com/uob/heart}
heart.api.timeout=5000

# Alpha Vantage API (Market Trends)
alpha.vantage.api.key=${ALPHA_VANTAGE_API_KEY:your_alpha_vantage_key}
alpha.vantage.api.url=https://www.alphavantage.co/query

# Open Exchange Rates API (Currency Fluctuations)
exchange.rates.api.key=${EXCHANGE_RATES_API_KEY:your_exchange_rates_key}
exchange.rates.api.url=https://openexchangerates.org/api
exchange.rates.api.timeout=5000

# NewsAPI (Market News Events)
news.api.key=${NEWS_API_KEY:your_news_api_key}
news.api.url=https://newsapi.org/v2
news.api.timeout=5000

# ==========================================
# CORS Configuration (for React Frontend)
# ==========================================
cors.allowed.origins=http://localhost:3000,http://localhost:5173,http://localhost:8081
cors.allowed.methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
cors.allowed.headers=*
cors.allow.credentials=true
cors.max.age=3600

# ==========================================
# Game Configuration
# ==========================================
game.starting.capital=10000
game.round.duration=60
game.total.rounds=3
game.profit.threshold.hint=500
game.profit.threshold.timeboost=1000
game.stock.count=5

# ==========================================
# Security Configuration
# ==========================================
# Basic security (will be enhanced with JWT later)
spring.security.user.name=admin
spring.security.user.password=admin

# JWT Configuration
jwt.secret=${JWT_SECRET:your-256-bit-secret-key-change-this-in-production-to-a-secure-random-string}
jwt.expiration=86400000
jwt.refresh.expiration=604800000

# Session Configuration
server.servlet.session.timeout=30m
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=false

# ==========================================
# Logging Configuration
# ==========================================
logging.level.root=INFO
logging.level.com.scu.uob.dsa.cardiac_trader_backend=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
logging.file.name=logs/cardiac-trader-backend.log

# ==========================================
# HTTP Client Configuration
# ==========================================
# RestTemplate/WebClient timeout settings
spring.web.client.timeout=5000
spring.web.client.connection-timeout=3000

# ==========================================
# API Documentation (Swagger/OpenAPI)
# ==========================================
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.enabled=true
springdoc.api-docs.enabled=true

# ==========================================
# Email Configuration
# ==========================================
# Email sending enabled - configure SMTP settings below
# For Gmail: Use App Password (not regular password)
# Get App Password: Google Account → Security → 2-Step Verification → App passwords
app.email.enabled=true
app.email.from=your-email@gmail.com
app.frontend.url=http://localhost:5173

# SMTP Configuration
# Gmail SMTP settings configured
# Note: Using Gmail App Password (16 characters without spaces)
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=your-email@gmail.com
spring.mail.password=your-app-password-here
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

